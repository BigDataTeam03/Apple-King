<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 				<!--관리자가 보는 상품 리스트 출력 -->
<mapper namespace="com.springlec.base.dao.AdminDao">
			<select id="productlist" resultType="com.springlec.base.model.ProductListDto">
			SELECT 
				product_code, 
				product_name,
				product_qty,
				origin,
				manufacture_date,
				weight,
				size,
				detail_image_name,
				view_count,
				product_reg_date,
				kind,
				product_image_names,
				price 
			FROM 
				product 
			WHERE
				<!--product 에서 product name 을 검색하지만 처음에는 아무것도 안들어감으로 모두 조회함. -->
			     product_name LIKE #{product_name} ${selected} ${orderby}
   
			</select>
			<!--  상품 업데이트 -->
			<update id="updateProduct">
			UPDATE product 
			SET
				   product_name=#{product_name},
			   	   product_qty=#{product_qty},		
			 	   origin=#{origin},		
		 		   manufacture_date=#{manufacture_date},	
			  	   weight=#{weight},			
			  	   size=#{size},			
		   		   detail_image_name=#{detail_image_name},
			       view_count=#{view_count},	
			       product_reg_date=now(),
			       kind=#{kind},					
			  	   product_image_names=#{product_image_names} 
			WHERE 
			  	   product_code=#{product_code}
			</update>
			<!-- 고객 리스트 출력 -->
			<select id="custList">
			SELECT  
				   cust_id,
				   name, 
				   tel, 
				   email, 		
				   address,
				   cust_rank,			
				   reg_date 
				 
			 FROM customer where name like #{name} and ${notThis} ${orderby};
			</select>
			<!-- 고객 문의 게시판 출력 -->
			<select id="questionList">
			 SELECT 
		        inquire.inquire_code,
		        inquire.cust_id,
		        inquire.product_code, 
		        inquire.inquire_date,
		        inquire.inquire_content, 
		        product.product_name 
		        
		     FROM 
		     	inquire
		        
		       <!--product 테이블과 조인-->
		     INNER JOIN 
		        product on inquire.product_code = product.product_code  
		        <!--답글이 아직 안 달린 문의 내역만 가져온다-->
		     WHERE 
		        inquire.answer_content is null ORDER BY inquire.inquire_date desc
			</select>
</mapper>