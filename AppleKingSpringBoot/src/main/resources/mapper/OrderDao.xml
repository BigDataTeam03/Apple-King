<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.springlec.base.dao.OrderDao">

	<select id="OrderList" resultType="com.springlec.base.model.OrderDto">
		SELECT o.product_code, o.order_code, o.payment_method, o.order_qty, o.orderdate, o.used_point,
       	p.product_name, p.price, p.product_image 
       	
		FROM `order` o
		
		JOIN product p ON o.product_code = p.product_code
		
		WHERE cust_id = #{userId}
		
		ORDER BY o.orderdate DESC;
	</select>
	<!-- order code 는 auto increase 임으로 추가 안함.  -->
	<insert id="orderInsertDao">
		insert into order (cust_id, 		<!-- 1 -->
		 					product_code,	<!-- 2 -->
		 					payment_method,	<!-- 3 -->
		 					used_point,		<!-- 4 -->
		 					order_qty,		<!-- 5 -->
		 					soldout,		<!-- 6 -->
		 					orderdate  )	<!-- 7 --> 
		 					values (
		 					#{cust_id},
		 					#{product_code},
		 					#{payment_method},
		 					#{used_point},
		 					#{order_qty},
		 					#{soldout},
		 					#{orderdate}  )					
		
	</insert>


	<select id="ReviewList" resultType="com.springlec.base.model.ReviewDto">
		SELECT * FROM review WHERE cust_id =#{userId}
	</select>


</mapper>